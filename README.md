# Setup

* Ruby version - 2.6.3

* Rails version 5.2.7

* Configuration - uses Postgres Database

* Queueing runs through Postgres database

This is a Template Rails website not to be used directly. Fork this to begin a project and then replace the Database name and configuration of all added tools.

# Added Tools

## Gems
### haml-rails
Clean Template Engine, mostly useful for forcing all developers to write clean legible code.
Also prevents Ruby HTML structure-errors as encapsulation is handled by indentation-level and not Closing Tags or end-statements.

### rubyzip and zip-zip
Use your preferred tool for zipping files. Useful for multi-file downloads as a single request can only yield a single file-download.

### andand
Clean up your code with "andand" rather than expression && expression.method

### aws-sdk-3 gems
Enable deployment to AWS, my preferred hosting solution

### activerecord-import
To be outdated in Rails 6 by built-in functions, but the best approach in Rails 5 to mass-insertion and updating.

### jquery gems
Easily incorporate JQuery and JQuery-UI CSS and Javascripts

### bootstrap_form, country_select, and bootstrap3_autocomplete_input
Easily generate Bootstrap-styled forms and country-select fields

### simple_form
Easily generate forms, automatically in Bootstrap styling. This is fully installed so forms generated by "rails scaffold ..." should be in simple_form format.

### browser
Browser-and-device detection. This is used in layouts/footer to add padding for iphone users so that content at the bottom of the page is not covered by the iphone interface.

### time_difference
Enables easy arithmetic with times. Note: This gives absolute values of differences between times given.

### order_as_specified
Allows you to use an array to set a specific order for elements in a relation. Used in self.order_by_presence, which is defined for all models and allows ordering by value of a Boolean with user-controlled null-handling.

### paper_trail
Uses a "Version" table to maintain a full changelog of all records in models with this Gem enabled. Vital for any auditable records.

### wicked_pdf and wkhtmltopdf-binary
Enables pdf-generation and automatically installs required binary

### timezone
Get timezone information for given locations and datetimes, adjusting for EST / EDT and other such issues.

### que
Enables ActiveJob queueing through the Postgres database rather than require Redis or some other tool. It is best to minimize the number of different parts of cloud-infrastructure.

### paranoia
Enable soft-deletion of records using deleted_at column and default scope.

### meta-tags
Enables easy SEO. This is used in controllers/concerns/seo.rb to set all SEO meta-tags and control appearance in Facebook and Twitter sharing. Tags can also be changed page-by-page as needed. Tags are set to be displayed in application.html.erb.

## Scopes
### really_all
Undoes deleted_at scoping from Paranoia if it is present

### like, like_contains, like_serialized_exact
Implements "like" SQL for regular fields amd serialized fields. Like_contains includes serialized fields with sub-fields that contain the search-parameter while like_serialized_exact requires an exact match between one of the sub-fields and the search-parameter.

### only_as_ordered
Combines "where" and "order_as_specified" to include only records with a match in the ordering array and to order by it.

### only_one
Include only one result matching the given requirement, but keep it as an AR Relation (typically used with GROUP clauses).

### order_by_presence
Controllable ordering by a Boolean. Note this is a Class Function and not a scope so the relation must be passed to it (at least in Rails 6).

### efficient_group
Uses Postgres' GROUP clause to generate a Hash table with arrays of record-content grouped as required. To be used for analytics or displays. This both reduces SQL calls and avoids instantiating large numbers of Models just for display, vastly improving performance. Note that Helper functions which take Hash tables can handle ActiveRecord objects or the array-elements which contain record-information as generated by this function. 

## Performance
### inline_css
At Controllers/concerns/performance.rb. This uses Premailer to inline CSS and retain all content. It also sets a variable, @defer_css to True, which is then used in the Layout to aync/defer the CSS and Javascript asset-pipelines, making them non-blocking without losing CSS functionality. This is to be used for Landing Pages so they load quickly and the asset-pipelines are already cached in the user's browser for all other pages. If Javascript is required on landing pages and dependencies must be loaded before the HTML, split the asset pipeline and load only those dependencies before hte HTML. Usually, you can find a CDN to deliver such dependencies, like underscore or JQuery, and simply load them in a partial after removing them from the Asset Pipeline. There is a good chance that with other websites doing the same, those JS files will already be in the user's browser-cache.

Note that this can dramatically improve performance for landing-pages and raise search-engine ranking.

## Data Handling
### Tags
Tools::Tag - Key-value pairs with a polymorphic belongs_to and a corresponding has_many in ApplicationRecord. All records can now use meta-fields even with duplicate keys.

### Global
In lib/modules/global_info.rb. This allows bypassing of MVC restrictions as needed by using Ruby's Thread hash. Documentation is in the module-definition. It enables tagging, encapsulation, or other management of all AR objects including those with models defined inside Gems without having to explicitly pass data through the Controllers. Note that each Request runs in its own Thread so data entered here will be accessible throughout Rails, but only for that Request.
